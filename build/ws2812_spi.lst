ARM GAS  /tmp/ccK4tFHZ.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ws2812_spi.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/ws2812_spi.c"
  20              		.section	.text.ws2812_spi_get_led,"ax",%progbits
  21              		.align	1
  22              		.global	ws2812_spi_get_led
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	ws2812_spi_get_led:
  28              	.LVL0:
  29              	.LFB132:
   1:Core/Src/ws2812_spi.c **** #include "ws2812_spi.h"
   2:Core/Src/ws2812_spi.c **** 
   3:Core/Src/ws2812_spi.c **** uint8_t ws2812_buffer[WS2812_BUF_LEN + 128] = {0};
   4:Core/Src/ws2812_spi.c **** 
   5:Core/Src/ws2812_spi.c **** uint32_t ws2812_spi_get_led(uint16_t index)
   6:Core/Src/ws2812_spi.c **** {
  30              		.loc 1 6 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
   7:Core/Src/ws2812_spi.c ****     return ws2812_buffer[(index * 24) + index] << 16 | ws2812_buffer[(index * 24) + index + 1] << 8
  35              		.loc 1 7 5 view .LVU1
  36              		.loc 1 7 39 is_stmt 0 view .LVU2
  37 0000 00EB8003 		add	r3, r0, r0, lsl #2
  38 0004 03EB8303 		add	r3, r3, r3, lsl #2
  39              		.loc 1 7 25 view .LVU3
  40 0008 0549     		ldr	r1, .L2
  41 000a C85C     		ldrb	r0, [r1, r3]	@ zero_extendqisi2
  42              	.LVL1:
  43              		.loc 1 7 91 view .LVU4
  44 000c 5A1C     		adds	r2, r3, #1
  45              		.loc 1 7 69 view .LVU5
  46 000e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
  47              		.loc 1 7 96 view .LVU6
  48 0010 1202     		lsls	r2, r2, #8
  49              		.loc 1 7 54 view .LVU7
  50 0012 42EA0042 		orr	r2, r2, r0, lsl #16
  51              		.loc 1 7 138 view .LVU8
ARM GAS  /tmp/ccK4tFHZ.s 			page 2


  52 0016 0233     		adds	r3, r3, #2
  53              		.loc 1 7 116 view .LVU9
  54 0018 C85C     		ldrb	r0, [r1, r3]	@ zero_extendqisi2
   8:Core/Src/ws2812_spi.c **** }
  55              		.loc 1 8 1 view .LVU10
  56 001a 1043     		orrs	r0, r0, r2
  57 001c 7047     		bx	lr
  58              	.L3:
  59 001e 00BF     		.align	2
  60              	.L2:
  61 0020 00000000 		.word	ws2812_buffer
  62              		.cfi_endproc
  63              	.LFE132:
  65              		.section	.text.ws2812_spi_set_led,"ax",%progbits
  66              		.align	1
  67              		.global	ws2812_spi_set_led
  68              		.syntax unified
  69              		.thumb
  70              		.thumb_func
  72              	ws2812_spi_set_led:
  73              	.LVL2:
  74              	.LFB133:
   9:Core/Src/ws2812_spi.c **** void ws2812_spi_set_led(uint16_t index, uint32_t color)
  10:Core/Src/ws2812_spi.c **** {
  75              		.loc 1 10 1 is_stmt 1 view -0
  76              		.cfi_startproc
  77              		@ args = 0, pretend = 0, frame = 0
  78              		@ frame_needed = 0, uses_anonymous_args = 0
  79              		@ link register save eliminated.
  11:Core/Src/ws2812_spi.c ****     // if (index >= WS2812_STRIP_LEN)
  12:Core/Src/ws2812_spi.c ****     //  return;
  13:Core/Src/ws2812_spi.c **** 
  14:Core/Src/ws2812_spi.c ****     for (uint8_t i = 0; i < 24; i++)
  80              		.loc 1 14 5 view .LVU12
  81              	.LBB2:
  82              		.loc 1 14 10 view .LVU13
  83              		.loc 1 14 18 is_stmt 0 view .LVU14
  84 0000 0023     		movs	r3, #0
  85              	.LVL3:
  86              		.loc 1 14 27 is_stmt 1 discriminator 1 view .LVU15
  87 0002 172B     		cmp	r3, #23
  88 0004 1CD8     		bhi	.L12
  89              	.LBE2:
  10:Core/Src/ws2812_spi.c ****     // if (index >= WS2812_STRIP_LEN)
  90              		.loc 1 10 1 is_stmt 0 view .LVU16
  91 0006 10B4     		push	{r4}
  92              		.cfi_def_cfa_offset 4
  93              		.cfi_offset 4, -4
  94 0008 0CE0     		b	.L7
  95              	.L8:
  96              	.LBB3:
  15:Core/Src/ws2812_spi.c ****     {
  16:Core/Src/ws2812_spi.c ****         ws2812_buffer[(index * 24) + i] = ((color >> (24 - i)) & 1) ? 0b11111100 : 0b111000000;
  97              		.loc 1 16 41 discriminator 2 view .LVU17
  98 000a 4FF0C00C 		mov	ip, #192
  99              	.L6:
 100              		.loc 1 16 30 discriminator 4 view .LVU18
ARM GAS  /tmp/ccK4tFHZ.s 			page 3


 101 000e 00EB4004 		add	r4, r0, r0, lsl #1
 102              		.loc 1 16 36 discriminator 4 view .LVU19
 103 0012 02EBC402 		add	r2, r2, r4, lsl #3
 104              		.loc 1 16 41 discriminator 4 view .LVU20
 105 0016 0B4C     		ldr	r4, .L14
 106 0018 04F802C0 		strb	ip, [r4, r2]
  14:Core/Src/ws2812_spi.c ****     {
 107              		.loc 1 14 34 is_stmt 1 discriminator 2 view .LVU21
 108 001c 0133     		adds	r3, r3, #1
 109              	.LVL4:
  14:Core/Src/ws2812_spi.c ****     {
 110              		.loc 1 14 34 is_stmt 0 discriminator 2 view .LVU22
 111 001e DBB2     		uxtb	r3, r3
 112              	.LVL5:
  14:Core/Src/ws2812_spi.c ****     {
 113              		.loc 1 14 27 is_stmt 1 discriminator 1 view .LVU23
 114 0020 172B     		cmp	r3, #23
 115 0022 0AD8     		bhi	.L13
 116              	.L7:
 117              		.loc 1 16 9 view .LVU24
 118              		.loc 1 16 58 is_stmt 0 view .LVU25
 119 0024 1A46     		mov	r2, r3
 120 0026 C3F1180C 		rsb	ip, r3, #24
 121              		.loc 1 16 51 view .LVU26
 122 002a 21FA0CFC 		lsr	ip, r1, ip
 123              		.loc 1 16 41 view .LVU27
 124 002e 1CF0010F 		tst	ip, #1
 125 0032 EAD0     		beq	.L8
 126              		.loc 1 16 41 discriminator 1 view .LVU28
 127 0034 4FF0FC0C 		mov	ip, #252
 128 0038 E9E7     		b	.L6
 129              	.L13:
 130              		.loc 1 16 41 discriminator 1 view .LVU29
 131              	.LBE3:
  17:Core/Src/ws2812_spi.c ****     }
  18:Core/Src/ws2812_spi.c **** }
 132              		.loc 1 18 1 view .LVU30
 133 003a 5DF8044B 		ldr	r4, [sp], #4
 134              		.cfi_restore 4
 135              		.cfi_def_cfa_offset 0
 136 003e 7047     		bx	lr
 137              	.L12:
 138              		.loc 1 18 1 view .LVU31
 139 0040 7047     		bx	lr
 140              	.L15:
 141 0042 00BF     		.align	2
 142              	.L14:
 143 0044 00000000 		.word	ws2812_buffer
 144              		.cfi_endproc
 145              	.LFE133:
 147              		.section	.text.ws2812_spi_set_all,"ax",%progbits
 148              		.align	1
 149              		.global	ws2812_spi_set_all
 150              		.syntax unified
 151              		.thumb
 152              		.thumb_func
 154              	ws2812_spi_set_all:
ARM GAS  /tmp/ccK4tFHZ.s 			page 4


 155              	.LVL6:
 156              	.LFB134:
  19:Core/Src/ws2812_spi.c **** void ws2812_spi_set_all(uint32_t color)
  20:Core/Src/ws2812_spi.c **** {
 157              		.loc 1 20 1 is_stmt 1 view -0
 158              		.cfi_startproc
 159              		@ args = 0, pretend = 0, frame = 0
 160              		@ frame_needed = 0, uses_anonymous_args = 0
 161              		.loc 1 20 1 is_stmt 0 view .LVU33
 162 0000 38B5     		push	{r3, r4, r5, lr}
 163              		.cfi_def_cfa_offset 16
 164              		.cfi_offset 3, -16
 165              		.cfi_offset 4, -12
 166              		.cfi_offset 5, -8
 167              		.cfi_offset 14, -4
 168 0002 0546     		mov	r5, r0
  21:Core/Src/ws2812_spi.c ****     for (uint16_t i = 0; i < WS2812_STRIP_LEN; i++)
 169              		.loc 1 21 5 is_stmt 1 view .LVU34
 170              	.LBB4:
 171              		.loc 1 21 10 view .LVU35
 172              	.LVL7:
 173              		.loc 1 21 19 is_stmt 0 view .LVU36
 174 0004 0024     		movs	r4, #0
 175              		.loc 1 21 5 view .LVU37
 176 0006 05E0     		b	.L17
 177              	.LVL8:
 178              	.L18:
  22:Core/Src/ws2812_spi.c ****     {
  23:Core/Src/ws2812_spi.c ****         ws2812_spi_set_led(i, color);
 179              		.loc 1 23 9 is_stmt 1 view .LVU38
 180 0008 2946     		mov	r1, r5
 181 000a 2046     		mov	r0, r4
 182 000c FFF7FEFF 		bl	ws2812_spi_set_led
 183              	.LVL9:
  21:Core/Src/ws2812_spi.c ****     for (uint16_t i = 0; i < WS2812_STRIP_LEN; i++)
 184              		.loc 1 21 49 discriminator 3 view .LVU39
 185 0010 0134     		adds	r4, r4, #1
 186              	.LVL10:
  21:Core/Src/ws2812_spi.c ****     for (uint16_t i = 0; i < WS2812_STRIP_LEN; i++)
 187              		.loc 1 21 49 is_stmt 0 discriminator 3 view .LVU40
 188 0012 A4B2     		uxth	r4, r4
 189              	.LVL11:
 190              	.L17:
  21:Core/Src/ws2812_spi.c ****     for (uint16_t i = 0; i < WS2812_STRIP_LEN; i++)
 191              		.loc 1 21 28 is_stmt 1 discriminator 1 view .LVU41
 192 0014 1F2C     		cmp	r4, #31
 193 0016 F7D9     		bls	.L18
 194              	.LBE4:
  24:Core/Src/ws2812_spi.c ****     }
  25:Core/Src/ws2812_spi.c **** }
 195              		.loc 1 25 1 is_stmt 0 view .LVU42
 196 0018 38BD     		pop	{r3, r4, r5, pc}
 197              		.loc 1 25 1 view .LVU43
 198              		.cfi_endproc
 199              	.LFE134:
 201              		.section	.text.ws2812_spi_send,"ax",%progbits
 202              		.align	1
ARM GAS  /tmp/ccK4tFHZ.s 			page 5


 203              		.global	ws2812_spi_send
 204              		.syntax unified
 205              		.thumb
 206              		.thumb_func
 208              	ws2812_spi_send:
 209              	.LVL12:
 210              	.LFB135:
  26:Core/Src/ws2812_spi.c **** 
  27:Core/Src/ws2812_spi.c **** void ws2812_spi_send(SPI_HandleTypeDef *hspi)
  28:Core/Src/ws2812_spi.c **** {
 211              		.loc 1 28 1 is_stmt 1 view -0
 212              		.cfi_startproc
 213              		@ args = 0, pretend = 0, frame = 0
 214              		@ frame_needed = 0, uses_anonymous_args = 0
 215              		.loc 1 28 1 is_stmt 0 view .LVU45
 216 0000 08B5     		push	{r3, lr}
 217              		.cfi_def_cfa_offset 8
 218              		.cfi_offset 3, -8
 219              		.cfi_offset 14, -4
  29:Core/Src/ws2812_spi.c ****     HAL_SPI_Transmit_DMA(hspi, ws2812_buffer, WS2812_BUF_LEN + 64);
 220              		.loc 1 29 5 is_stmt 1 view .LVU46
 221 0002 4FF45072 		mov	r2, #832
 222 0006 0249     		ldr	r1, .L22
 223 0008 FFF7FEFF 		bl	HAL_SPI_Transmit_DMA
 224              	.LVL13:
  30:Core/Src/ws2812_spi.c **** }
 225              		.loc 1 30 1 is_stmt 0 view .LVU47
 226 000c 08BD     		pop	{r3, pc}
 227              	.L23:
 228 000e 00BF     		.align	2
 229              	.L22:
 230 0010 00000000 		.word	ws2812_buffer
 231              		.cfi_endproc
 232              	.LFE135:
 234              		.section	.text.HAL_SPI_TxHalfCpltCallback,"ax",%progbits
 235              		.align	1
 236              		.global	HAL_SPI_TxHalfCpltCallback
 237              		.syntax unified
 238              		.thumb
 239              		.thumb_func
 241              	HAL_SPI_TxHalfCpltCallback:
 242              	.LVL14:
 243              	.LFB136:
  31:Core/Src/ws2812_spi.c **** 
  32:Core/Src/ws2812_spi.c **** void HAL_SPI_TxHalfCpltCallback(SPI_HandleTypeDef *hspi)
  33:Core/Src/ws2812_spi.c **** {
 244              		.loc 1 33 1 is_stmt 1 view -0
 245              		.cfi_startproc
 246              		@ args = 0, pretend = 0, frame = 0
 247              		@ frame_needed = 0, uses_anonymous_args = 0
 248              		@ link register save eliminated.
  34:Core/Src/ws2812_spi.c **** }
 249              		.loc 1 34 1 view .LVU49
 250 0000 7047     		bx	lr
 251              		.cfi_endproc
 252              	.LFE136:
 254              		.section	.text.HAL_SPI_TxCpltCallback,"ax",%progbits
ARM GAS  /tmp/ccK4tFHZ.s 			page 6


 255              		.align	1
 256              		.global	HAL_SPI_TxCpltCallback
 257              		.syntax unified
 258              		.thumb
 259              		.thumb_func
 261              	HAL_SPI_TxCpltCallback:
 262              	.LVL15:
 263              	.LFB137:
  35:Core/Src/ws2812_spi.c **** 
  36:Core/Src/ws2812_spi.c **** void HAL_SPI_TxCpltCallback(SPI_HandleTypeDef *hspi)
  37:Core/Src/ws2812_spi.c **** {
 264              		.loc 1 37 1 view -0
 265              		.cfi_startproc
 266              		@ args = 0, pretend = 0, frame = 0
 267              		@ frame_needed = 0, uses_anonymous_args = 0
 268              		@ link register save eliminated.
  38:Core/Src/ws2812_spi.c **** }...
 269              		.loc 1 38 1 view .LVU51
 270 0000 7047     		bx	lr
 271              		.cfi_endproc
 272              	.LFE137:
 274              		.global	ws2812_buffer
 275              		.section	.bss.ws2812_buffer,"aw",%nobits
 276              		.align	2
 279              	ws2812_buffer:
 280 0000 00000000 		.space	896
 280      00000000 
 280      00000000 
 280      00000000 
 280      00000000 
 281              		.text
 282              	.Letext0:
 283              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 284              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 285              		.file 4 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l432xx.h"
 286              		.file 5 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 287              		.file 6 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 288              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_spi.h"
 289              		.file 8 "Core/Inc/ws2812_spi.h"
ARM GAS  /tmp/ccK4tFHZ.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 ws2812_spi.c
     /tmp/ccK4tFHZ.s:21     .text.ws2812_spi_get_led:00000000 $t
     /tmp/ccK4tFHZ.s:27     .text.ws2812_spi_get_led:00000000 ws2812_spi_get_led
     /tmp/ccK4tFHZ.s:61     .text.ws2812_spi_get_led:00000020 $d
     /tmp/ccK4tFHZ.s:279    .bss.ws2812_buffer:00000000 ws2812_buffer
     /tmp/ccK4tFHZ.s:66     .text.ws2812_spi_set_led:00000000 $t
     /tmp/ccK4tFHZ.s:72     .text.ws2812_spi_set_led:00000000 ws2812_spi_set_led
     /tmp/ccK4tFHZ.s:143    .text.ws2812_spi_set_led:00000044 $d
     /tmp/ccK4tFHZ.s:148    .text.ws2812_spi_set_all:00000000 $t
     /tmp/ccK4tFHZ.s:154    .text.ws2812_spi_set_all:00000000 ws2812_spi_set_all
     /tmp/ccK4tFHZ.s:202    .text.ws2812_spi_send:00000000 $t
     /tmp/ccK4tFHZ.s:208    .text.ws2812_spi_send:00000000 ws2812_spi_send
     /tmp/ccK4tFHZ.s:230    .text.ws2812_spi_send:00000010 $d
     /tmp/ccK4tFHZ.s:235    .text.HAL_SPI_TxHalfCpltCallback:00000000 $t
     /tmp/ccK4tFHZ.s:241    .text.HAL_SPI_TxHalfCpltCallback:00000000 HAL_SPI_TxHalfCpltCallback
     /tmp/ccK4tFHZ.s:255    .text.HAL_SPI_TxCpltCallback:00000000 $t
     /tmp/ccK4tFHZ.s:261    .text.HAL_SPI_TxCpltCallback:00000000 HAL_SPI_TxCpltCallback
     /tmp/ccK4tFHZ.s:276    .bss.ws2812_buffer:00000000 $d

UNDEFINED SYMBOLS
HAL_SPI_Transmit_DMA
